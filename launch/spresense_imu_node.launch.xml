<?xml version="1.0"?>
<launch>
  <arg name="use_sim_time" default="false"/>
  <arg name="port" default="/dev/sensors/Spresense_IMU"/>
  <arg name="frame_id" default="imu_link"/>
  <arg name="imu_topic" default="/imu/spresense"/>
  <arg name="time_out" default="10.0"/>
  <arg name="baudrate" default="921600"/>

  <!-- spresense imu node -->
  <node pkg="cxd5602pwbimu" exec="spresense_imu_node">
    <param name="use_sim_time" value="$(var use_sim_time)"/>
    <param name="port" value="$(var port)"/>
    <param name="frame_id" value="$(var frame_id)"/>
    <param name="imu_topic" value="$(var imu_topic)"/>
    <param name="time_out" value="$(var time_out)"/>
    <param name="baudrate" value="$(var baudrate)"/>
  </node>

  <!-- madgwick filter node -->
  <node pkg="imu_filter_madgwick" exec="imu_filter_madgwick_node" name="madgwick_filter">
    <param from="$(find-pkg-share cxd5602pwbimu)/config/madgwick.yaml"/>
    <remap from="/imu/data_raw" to="$(var imu_topic)"/>
  </node>
</launch>
